<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motion Android UI Studio - Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="studio-container">
        <header class="studio-header">
            <h1>Motion Android UI Studio</h1>
            <div class="header-actions">
                <button class="header-btn" onclick="openMotionStudio()">ğŸ¬ Motion Studio</button>
                <button class="header-btn" onclick="openColorAssistant()">ğŸ¨ AI Colors</button>
                <button class="header-btn" onclick="openComponentMarketplace()">ğŸ§© Marketplace</button>
                <button class="header-btn" onclick="toggleDesignFeedback()">ğŸ’¡ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ…</button>
                <button class="export-btn" onclick="exportProjectEnhanced()">ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</button>
            </div>
        </header>

        <div class="studio-layout">
            <aside class="controls-panel">
                <div class="control-section">
                    <h3>Ù†ÙˆØ¹ Ø§Ù„Ø´Ø§Ø´Ø©</h3>
                    <select id="screenType" onchange="handleScreenChange()">
                        <option value="splash">Splash Screen</option>
                        <option value="login">Login Screen</option>
                        <option value="home">Home Screen</option>
                        <option value="onboarding">Onboarding</option>
                        <option value="settings">Settings Screen</option>
                    </select>
                </div>

                <div class="control-section">
                    <h3>Style Preset</h3>
                    <div class="preset-grid">
                        <button class="preset-btn active" data-preset="minimal" onclick="handlePresetChange(this, 'minimal')">Minimal Light</button>
                        <button class="preset-btn" data-preset="dark" onclick="handlePresetChange(this, 'dark')">Dark Neon</button>
                        <button class="preset-btn" data-preset="glass" onclick="handlePresetChange(this, 'glass')">Glass UI</button>
                        <button class="preset-btn" data-preset="material" onclick="handlePresetChange(this, 'material')">Material You</button>
                        <button class="preset-btn" data-preset="gradient" onclick="handlePresetChange(this, 'gradient')">Gradient Flow</button>
                        <button class="preset-btn" data-preset="cyber" onclick="handlePresetChange(this, 'cyber')">Cyber</button>
                    </div>
                </div>

                <div class="control-section">
                    <h3>ğŸ¨ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø°ÙƒÙŠ</h3>
                    <div class="ai-color-section">
                        <div class="color-input-group">
                            <label>Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:</label>
                            <input type="color" id="primaryColor" value="#6200EE" onchange="handleColorChange()">
                        </div>
                        
                        <select id="appCategory" onchange="suggestColorsForCategory()">
                            <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</option>
                            <option value="productivity">Ø¥Ù†ØªØ§Ø¬ÙŠØ©</option>
                            <option value="gaming">Ø£Ù„Ø¹Ø§Ø¨</option>
                            <option value="finance">Ù…Ø§Ù„ÙŠØ©</option>
                            <option value="social">Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</option>
                            <option value="ecommerce">ØªØ¬Ø§Ø±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</option>
                            <option value="health">ØµØ­Ø©</option>
                        </select>
                        
                        <div class="color-suggestions" id="colorSuggestions">
                            <!-- Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† -->
                        </div>
                        
                        <div class="contrast-check" id="contrastCheck">
                            <!-- ÙØ­Øµ Ø§Ù„ØªØ¨Ø§ÙŠÙ† -->
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <h3>ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ…</h3>
                    <div class="design-analysis" id="designAnalysis">
                        <div class="design-score">
                            <span class="score-label">Ù†Ù‚Ø§Ø· Ø§Ù„ØªØµÙ…ÙŠÙ…:</span>
                            <span class="score-value" id="designScore">--</span>
                        </div>
                        <div class="design-suggestions" id="designSuggestions">
                            <!-- Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ† -->
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <h3>Mood</h3>
                    <select id="mood" onchange="handleMoodChange()">
                        <option value="calm">Calm</option>
                        <option value="energetic">Energetic</option>
                        <option value="dark">Dark</option>
                        <option value="neon">Neon</option>
                    </select>
                </div>

                <div class="control-section">
                    <h3>Animation Style</h3>
                    <select id="animationStyle" onchange="handleAnimationChange()">
                        <option value="fade-slide">Fade + Slide In</option>
                        <option value="scale-reveal">Scale Reveal</option>
                        <option value="staggered">Staggered Content</option>
                        <option value="bounce">Bounce</option>
                    </select>
                </div>

                <div class="control-section">
                    <h3>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø§Ø´Ø©</h3>
                    <div id="contentInputs">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ -->
                    </div>
                </div>

                <div class="control-section">
                    <h3>ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶</h3>
                    <div class="theme-toggle">
                        <button class="theme-btn active" onclick="handleThemeChange('light')">Light</button>
                        <button class="theme-btn" onclick="handleThemeChange('dark')">Dark</button>
                    </div>
                </div>
            </aside>

            <main class="preview-panel">
                <div class="phone-mockup">
                    <div class="phone-screen" id="phoneScreen">
                        <!-- Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© -->
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="engine/theme-engine.js"></script>
    <script src="engine/motion-engine.js"></script>
    <script src="engine/preview-engine.js"></script>
    <script src="engine/export-engine.js"></script>
    <script src="engine/ai-assistant.js"></script>
    <script src="engine/layout-engine.js"></script>
    <script src="engine/tokens-engine.js"></script>
    <script src="engine/device-preview.js"></script>
    <script>
        // Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        function handleScreenChange() {
            const screenSelect = document.getElementById('screenType');
            if (screenSelect && window.previewEngine) {
                const screenType = screenSelect.value;
                console.log('Changing screen to:', screenType);
                window.previewEngine.updateScreen(screenType);
            }
        }

        function handlePresetChange(button, preset) {
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            if (window.themeEngine) {
                window.themeEngine.updatePreset(preset);
                window.themeEngine.applyCSSVariables();
                
                if (window.previewEngine) {
                    setTimeout(() => {
                        window.previewEngine.renderScreen();
                    }, 100);
                }
            }
        }

        function handleColorChange() {
            const colorInput = document.getElementById('primaryColor');
            if (colorInput && window.themeEngine) {
                const color = colorInput.value;
                window.themeEngine.updatePrimaryColor(color);
                window.themeEngine.applyCSSVariables();
                
                if (window.previewEngine) {
                    setTimeout(() => {
                        window.previewEngine.renderScreen();
                    }, 100);
                }
            }
        }

        function handleMoodChange() {
            const moodSelect = document.getElementById('mood');
            if (moodSelect && window.themeEngine) {
                const mood = moodSelect.value;
                window.themeEngine.updateMood(mood);
                window.themeEngine.applyCSSVariables();
                
                if (window.previewEngine) {
                    setTimeout(() => {
                        window.previewEngine.renderScreen();
                    }, 100);
                }
            }
        }

        function handleAnimationChange() {
            const animationSelect = document.getElementById('animationStyle');
            if (animationSelect && window.motionEngine) {
                const animation = animationSelect.value;
                window.motionEngine.updateAnimationType(animation);
            }
        }

        function handleThemeChange(theme) {
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (window.themeEngine) {
                window.themeEngine.updateTheme(theme);
                window.themeEngine.applyCSSVariables();
                
                if (window.previewEngine) {
                    setTimeout(() => {
                        window.previewEngine.renderScreen();
                    }, 100);
                }
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Studio initializing...');
            
            setTimeout(() => {
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ù…Ù† Motion Studio Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ØªÙˆÙØ±Ø©
                loadChangesFromMotionStudio();
                
                // ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø±ÙƒØ§Øª
                if (window.themeEngine) {
                    window.themeEngine.applyCSSVariables();
                    console.log('Theme engine initialized');
                }
                
                if (window.previewEngine) {
                    const phoneScreen = document.getElementById('phoneScreen');
                    if (phoneScreen) {
                        window.previewEngine.updateScreen('splash');
                        console.log('Preview engine initialized');
                    }
                }
                
                // ØªÙ‡ÙŠØ¦Ø© Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø£Ù„ÙˆØ§Ù†
                if (window.aiAssistant) {
                    console.log('AI Assistant initialized');
                }
                
                console.log('Studio initialization complete');
            }, 1000);
        });

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ù…Ù† Motion Studio
        function loadChangesFromMotionStudio() {
            try {
                const savedState = localStorage.getItem('studioState');
                if (savedState) {
                    const state = JSON.parse(savedState);
                    if (state.motionData && state.lastModified) {
                        console.log('Loading changes from Motion Studio:', state.motionData);
                        
                        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ
                        if (window.motionEngine && state.motionData) {
                            console.log('Applied motion changes');
                        }
                        
                        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯
                        if (typeof showSuccessMessage === 'function') {
                            showSuccessMessage('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ù…Ù† Motion Studio Ø¨Ù†Ø¬Ø§Ø­!');
                        }
                    }
                }
            } catch (error) {
                console.error('Error loading changes from Motion Studio:', error);
            }
        }
    </script>
</body>
</html>